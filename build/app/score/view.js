define(["jquery","underscore","text!app/score/style.css","text!app/score/template.tpl"],function(a,b,c,d){"use strict";function e(){this.elementId="#score",this.template=this.compile(),this.reset()}return e.prototype={compile:function(){var a="<style>"+c+"</style>"+d;return b.template(a)},add:function(a){a.scored&&(this.counter+=a.word.length),this.attempts.push({word:a.word,score:a.scored?a.word.length:"âœ˜"}),this.render()},render:function(){var b=this.template({counter:this.counter,attempts:this.attempts});a(this.elementId).html(b)},check:function(a){var c=b.findWhere(this.attempts,{word:a});return!Boolean(c)},start:function(){this.reset(),this.render()},stop:function(){this.reset(),this.render()},reset:function(){this.counter=0,this.attempts=[]}},e}),define(["app/score/view"],function(a){"use strict";describe("ScoreView",function(){var b;beforeEach(function(){b=new a,b.render=jasmine.createSpy("render")}),it("should allow new attempts",function(){expect(b.check("new")).toBeTruthy()}),it("should not allow duplicate attempts",function(){b.add({word:"blah",scored:!0}),expect(b.check("blah")).toBeFalsy()}),it("should increment counter if scored",function(){b.add({word:"blah",scored:!0}),expect(b.counter).toBe(4),b.add({word:"pow",scored:!0}),expect(b.counter).toBe(7)}),it("should not increment counter if not scored",function(){b.add({word:"blah",scored:!1}),expect(b.counter).toBe(0)})})});